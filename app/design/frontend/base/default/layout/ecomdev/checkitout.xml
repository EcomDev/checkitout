<?xml version="1.0"?>
<!-- Layout of the friendly checkout -->
<layout version="0.1.0">
    
    <checkout_cart_index>
        <reference name="checkout.cart.methods.onepage">
            <action method="setTemplate"><template>ecomdev/checkitout/link.phtml</template></action>
        </reference>
    </checkout_cart_index>
    
    <checkout_onepage_index>
       <update handle="page_one_column" />
        
        <reference name="head">
            <action method="addItem"><type>skin_js</type><file>js/ecomdev/checkitout.js</file></action>
            <action method="addItem"><type>skin_css</type><file>css/ecomdev/checkitout.css</file></action>
        </reference>
        
        <remove name="left" />
        <remove name="right" />
        
        <reference name="content">
            <action method="unsetChild"><alias>checkout.onepage</alias></action>
            <block name="checkout.layout" type="ecomdev_checkitout/checkout_layout" template="ecomdev/checkitout/layout.phtml">
                <action method="addCheckoutStepToLayout"><layout>top</layout><step>login</step></action>
                <action method="addCheckoutStepToLayout"><layout>address</layout><step>billing</step></action>
                <action method="addCheckoutStepToLayout"><layout>address</layout><step>shipping</step></action>
                <action method="addCheckoutStepToLayout"><layout>right</layout><step>shipping_method</step><virtual>0</virtual></action>
                <action method="addCheckoutStepToLayout"><layout>right</layout><step>payment</step><virtual>0</virtual></action>
                <action method="addCheckoutStepToLayout"><layout>right-bottom</layout><step>payment</step><virtual>1</virtual></action>
                <action method="addCheckoutStepToLayout"><layout>right-bottom</layout><step>review</step></action>
            </block>
        </reference>

        <reference name="checkout.onepage.login">
            <action method="setTemplate"><template>ecomdev/checkitout/login.phtml</template></action>
        </reference>
        
        <reference name="checkout.onepage.payment">
            <action method="setTemplate"><template>ecomdev/checkitout/payment.phtml</template></action>
        </reference>
        
        <reference name="checkout.onepage.review">
            <action method="setTemplate"><template>ecomdev/checkitout/review.phtml</template></action>
        </reference>
    </checkout_onepage_index>

    <checkout_onepage_steps>
        <update handle="checkout_onepage_index" />
    </checkout_onepage_steps>

    <checkout_onepage_layout>
        <update handle="checkout_onepage_index" />
    </checkout_onepage_layout>
</layout>